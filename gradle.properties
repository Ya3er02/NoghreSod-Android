# Gradle Properties - Performance & Stability Configuration
# Last updated: 2025-12-28
# Optimized for enterprise-grade development and fast local builds

# ==========================
# JVM CONFIGURATION
# ==========================
# Allocate 4GB-6GB for build process (depends on available RAM)
# Increase if builds fail with OOM errors
org.gradle.jvmargs=-Xmx6144m -XX:MaxMetaspaceSize=1g -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=./build/heap_dump.hprof

# Gradle Daemon settings (reuse JVM across builds)
org.gradle.daemon=true
org.gradle.daemon.idletimeout=7200000  # 2 hours before idle shutdown

# ==========================
# BUILD OPTIMIZATION
# ==========================
# Enable parallel compilation for faster builds
org.gradle.parallel=true
org.gradle.workers.max=8

# Configure on-demand building (only build what's needed)
org.gradle.configureondemand=true

# Enable build cache for faster incremental builds
org.gradle.caching=true
org.gradle.build.cache.debug=false

# ==========================
# KOTLIN COMPILATION
# ==========================
# Enable incremental Kotlin compilation
kotlin.incremental=true
kotlin.incremental.multiplatform=true
kotlin.incremental.js=true

# Use daemon for fast incremental compilation
kotlin.compiler.execution.strategy=daemon

# Enable kotlinc analysis (helps IDE with type inference)
kotlin.codeAnalysis.extendedReport=false

# ==========================
# ANNOTATION PROCESSING (KAPT)
# ==========================
# Incremental annotation processing (faster builds)
kapt.incremental.apt=true
kapt.use.worker.api=true
kapt.include.compile.classpath=false
kapt.classpath.snapshot.enabled=true

# Optional: Enable kapt debugging if needed
# kapt.verbose=false

# ==========================
# ANDROID GRADLE PLUGIN
# ==========================
# R8 Full Mode (aggressive optimization & obfuscation)
android.enableR8.fullMode=true

# New resource shrinking feature
android.enableResourceOptimizations=true

# Non-Transitive R Class (reduces build time & apk size)
android.nonTransitiveRClass=true

# Enable modular Desugaring (reduce dex size for Java 8+ features)
android.enableDesugaring=true

# Disable legacy multidex (minSdk >= 24, so no need)
android.useLegacyMultiDex=false

# AndroidX migration (required for modern Android development)
android.useAndroidX=true
android.enableJetifier=true

# ==========================
# TESTING CONFIGURATION
# ==========================
# Use AndroidX Test Runner (mandatory for modern testing)
androidx.test.enabled=true

# ==========================
# JETPACK COMPOSE
# ==========================
# Compose compiler diagnostics (helps with recomposition issues)
android.suppressUnsupportedCompileSdk=34

# ==========================
# NETWORK CONFIGURATION
# ==========================
# Use HTTPS only for Maven repositories (security)
systemProp.org.gradle.internal.http.socketTimeout=120000
systemProp.org.gradle.internal.http.connectionTimeout=120000

# ==========================
# LINT CONFIGURATION
# ==========================
# Speed up lint checks
android.lint.faster=true
android.lintOptions.checkReleaseBuilds=true

# ==========================
# SECRETS & CREDENTIALS
# ==========================
# NEVER commit actual values here!
# Use local.properties or environment variables instead
#
# Required for local development (set in local.properties):
#   zarinpal.merchant.id=YOUR_PRODUCTION_MERCHANT_ID
#   zarinpal.sandbox.merchant.id=YOUR_SANDBOX_MERCHANT_ID
#   keystore.file=/path/to/keystore.jks
#   keystore.password=PASSWORD
#   keystore.alias=ALIAS
#   keystore.key.password=KEY_PASSWORD
#
# For CI/CD (set in GitHub Secrets):
#   ZARINPAL_PROD_ID
#   ZARINPAL_SANDBOX_ID
#   KEYSTORE_PASSWORD
#
# See SETUP_SECRETS.md for complete setup instructions

# ==========================
# FEATURE FLAGS (OPTIONAL)
# ==========================
# Enable new feature flags as needed
# android.enableNewResourceShrinker.redactionType=all

# ==========================
# PERFORMANCE TUNING
# ==========================
# Disable checks that slow down debug builds
android.disableDependencyVerification=false

# Enable namespace isolation (AGP 8.0+)
android.useNewApkStructure=true

# ==========================
# VERSION CATALOG (Future)
# ==========================
# Once version catalogs are implemented:
# enableFeaturePreview("TYPESAFE_PROJECT_ACCESSORS")
