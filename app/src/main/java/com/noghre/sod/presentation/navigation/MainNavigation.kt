package com.noghre.sod.presentation.navigation\n\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material.icons.Icons\nimport androidx.compose.material3.*\nimport androidx.compose.runtime.*\nimport androidx.compose.ui.Modifier\nimport androidx.navigation.NavDestination.Companion.hierarchy\nimport androidx.navigation.NavGraph.Companion.findStartDestination\nimport androidx.navigation.compose.currentBackStackEntryAsState\nimport androidx.navigation.compose.rememberNavController\n\n/**\n * Main navigation composable with bottom navigation bar.\n * Manages main app navigation with persistent bottom bar.\n */\n@Composable\nfun MainNavigation() {\n    val navController = rememberNavController()\n    val navBackStackEntry by navController.currentBackStackEntryAsState()\n    val currentDestination = navBackStackEntry?.destination\n\n    Scaffold(\n        bottomBar = {\n            // Only show bottom bar for main screens\n            val mainRoutes = listOf(\n                NavigationRoute.Home.route,\n                NavigationRoute.Products.route,\n                NavigationRoute.Cart.route,\n                NavigationRoute.Favorites.route,\n                NavigationRoute.Profile.route\n            )\n\n            if (currentDestination?.route in mainRoutes) {\n                NavigationBar {\n                    mainNavigationItems().forEach { item ->\n                        val isSelected = currentDestination?.hierarchy?.any {\n                            it.route == item.route.route\n                        } == true\n\n                        NavigationBarItem(\n                            icon = {\n                                Icon(\n                                    imageVector = if (isSelected) item.selectedIcon else item.unselectedIcon,\n                                    contentDescription = item.label\n                                )\n                            },\n                            label = { Text(item.label) },\n                            selected = isSelected,\n                            onClick = {\n                                navController.navigate(item.route.route) {\n                                    // Pop up to the start destination of the graph to\n                                    // avoid building up a large stack of destinations\n                                    popUpTo(navController.graph.findStartDestination().id) {\n                                        saveState = true\n                                    }\n                                    // Avoid multiple copies of the same destination when\n                                    // reselecting the same item\n                                    launchSingleTop = true\n                                    // Restore state when reselecting a previously selected item\n                                    restoreState = true\n                                }\n                            }\n                        )\n                    }\n                }\n            }\n        }\n    ) { paddingValues ->\n        NoghreSodNavigation(\n            navController = navController,\n            modifier = Modifier.padding(paddingValues)\n        )\n    }\n}\n\n/**\n * Get bottom navigation items.\n */\nprivate fun mainNavigationItems(): List<BottomNavItem> {\n    return bottomNavItems\n}\n